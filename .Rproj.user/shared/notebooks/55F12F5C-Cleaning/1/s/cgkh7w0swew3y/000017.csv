"0","# Ensure all necessary packages are installed and loaded"
"0","if (!require(caret)) {"
"0","    install.packages(""caret"", dependencies = TRUE)"
"0","}"
"0","library(caret)"
"0",""
"0","if (!require(rpart)) {"
"0","    install.packages(""rpart"")"
"0","}"
"0","library(rpart)"
"0",""
"0","if (!require(rpart.plot)) {"
"0","    install.packages(""rpart.plot"")"
"0","}"
"0","library(rpart.plot)"
"0",""
"0","if (!require(dplyr)) {"
"0","    install.packages(""dplyr"")"
"0","}"
"0","library(dplyr)"
"0",""
"0","# Assuming the crime data is loaded into 'crime_data'"
"0","# Convert necessary columns to appropriate formats"
"0","crime$DATE.OCC <- as.Date(crime$DATE.OCC, ""%m/%d/%Y %H:%M"")"
"0","crime$Crm.Cd.Desc <- as.factor(crime$Crm.Cd.Desc)"
"0","crime$Vict.Sex <- factor(crime$Vict.Sex)"
"0",""
"0","# Filter to ensure clean data"
"0","filtered_data <- crime %>%"
"0","  filter(Vict.Age > 0 & Vict.Age <= 100) %>%"
"0","  select(Crm.Cd.Desc, Vict.Age, Vict.Sex)"
"0",""
"0","# Splitting the data into training and testing sets"
"0","set.seed(123)  # For reproducibility"
"0","training_indices <- createDataPartition(filtered_data$Crm.Cd.Desc, p = 0.7, list = FALSE)"
"2","Warning: Some classes have no records ( BEASTIALITY, CRIME AGAINST NATURE SEXUAL ASSLT WITH ANIM, COUNTERFEIT, DISHONEST EMPLOYEE - PETTY THEFT, DISRUPT SCHOOL, THEFT, COIN MACHINE - ATTEMPT, TILL TAP - PETTY ($950 & UNDER) ) and these will be ignored"
"2","Warning: Some classes have a single record ( CHILD ABANDONMENT, CONTRIBUTING, CREDIT CARDS, FRAUD USE ($950 & UNDER, DRIVING WITHOUT OWNER CONSENT (DWOC), DRUNK ROLL, EMBEZZLEMENT, PETTY THEFT ($950 & UNDER), FALSE POLICE REPORT, FIREARMS EMERGENCY PROTECTIVE ORDER (FIREARMS EPO), INCITING A RIOT, LYNCHING - ATTEMPTED, SEX OFFENDER REGISTRANT OUT OF COMPLIANCE, THEFT, COIN MACHINE - GRAND ($950.01 & OVER), TRAIN WRECKING ) and these will be selected for the sample"
"0","train_data <- filtered_data[training_indices, ]"
"0","test_data <- filtered_data[-training_indices, ]"
"0",""
"0","# Building the decision tree model"
"0","tree_model <- rpart(Crm.Cd.Desc ~ Vict.Age + Vict.Sex, data = train_data, method = ""class"")"
"0",""
"0","# Plotting the tree"
"0","rpart.plot(tree_model)"
